{"ast":null,"code":"import _defineProperty from\"/Users/georgianaang/NTU-SCTP/module2/6m-software-2.7-cond-render-lists/work-2/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/georgianaang/NTU-SCTP/module2/6m-software-2.7-cond-render-lists/work-2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/georgianaang/NTU-SCTP/module2/6m-software-2.7-cond-render-lists/work-2/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/georgianaang/NTU-SCTP/module2/6m-software-2.7-cond-render-lists/work-2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from\"react\";import{v4 as uuid}from\"uuid\";import styles from\"./Product.module.css\";import Card from\"./Card\";import ViewList from\"./ViewList\";import ViewForm from\"./ViewForm\";import ProductContext from\"../context/ProductContext\";import ModeContext from\"../context/ModeContext\";import Toggle from\"./Toggle\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Product(){var ctx=useContext(ProductContext);var modeCtx=useContext(ModeContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];// const [sumTotal, setSumTotal] = useState(0);\n/*\n    CREATE: Add a new product into the list\n  */var handlerAddProduct=function handlerAddProduct(){var newItem={id:uuid(),// id: null,\nname:ctx.name,quantity:ctx.count,price:ctx.price,discount:ctx.discount,total:ctx.count*ctx.price*(100-ctx.discount)/100};var newList=[].concat(_toConsumableArray(list),[newItem]);setList(newList);// const sum = sumTotal + newItem.total;\n// setSumTotal(sum);\n};/*\n    DELETE: Remove a  product from the list\n  */var handlerDeleteProduct=function handlerDeleteProduct(id){setList(function(curList){if(editMode){return curList;}else{// makes a copy of original arr\nvar updatedList=curList.filter(function(item){return item.id!==id;});return updatedList;}});};//\n/*\n    UPDATE: Edit a  product in the list\n  */var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editMode=_useState4[0],setEditMode=_useState4[1];var _useState5=useState({index:0,name:\"\",quantity:0,price:0,discount:0}),_useState6=_slicedToArray(_useState5,2),editItem=_useState6[0],setEditItem=_useState6[1];var handlerUpdateProduct=function handlerUpdateProduct(editId){var index=list.findIndex(function(item){return item.id===editId;});console.log(\"edit clicked\");setEditMode(true);setEditItem(function(){var item=_objectSpread({},list[index]);item.index=index;return item;});console.log(editItem);};//ref function below from answer in part 2 final assignment\nvar handlerUpdateForm=function handlerUpdateForm(event,key){var value=event.target.value;var updatedItem=_objectSpread(_objectSpread({},editItem),{},_defineProperty({},key,value));setEditItem(updatedItem);};var handlerSubmitForm=function handlerSubmitForm(index){setList(function(prevList){var updatedList=_toConsumableArray(prevList);updatedList[index]=editItem;updatedList[index].total=updatedList[index].quantity*updatedList[index].price*(1-updatedList[index].discount/100);return updatedList;});setEditMode(false);};//---------------------------------------------------------------------------\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.container,\" \").concat(modeCtx.isDark&&styles.dark),children:[/*#__PURE__*/_jsx(Toggle,{}),/*#__PURE__*/_jsx(Card,{handlerAddProduct:handlerAddProduct}),/*#__PURE__*/_jsx(ViewList,{list:list// sum={totalAmt}\n,handlerDeleteItem:handlerDeleteProduct,handlerEditItem:handlerUpdateProduct}),editMode&&/*#__PURE__*/_jsx(ViewForm,{item:editItem,handlerUpdateForm:handlerUpdateForm,handlerSubmitForm:handlerSubmitForm})]});}export default Product;","map":{"version":3,"names":["useState","useContext","v4","uuid","styles","Card","ViewList","ViewForm","ProductContext","ModeContext","Toggle","Product","ctx","modeCtx","list","setList","handlerAddProduct","newItem","id","name","quantity","count","price","discount","total","newList","handlerDeleteProduct","curList","editMode","updatedList","filter","item","setEditMode","index","editItem","setEditItem","handlerUpdateProduct","editId","findIndex","console","log","handlerUpdateForm","event","key","value","target","updatedItem","handlerSubmitForm","prevList","container","isDark","dark"],"sources":["/Users/georgianaang/NTU-SCTP/module2/6m-software-2.7-cond-render-lists/work-2/src/components/Product.js"],"sourcesContent":["import { useState, useContext } from \"react\";\n\nimport { v4 as uuid } from \"uuid\";\n\nimport styles from \"./Product.module.css\";\nimport Card from \"./Card\";\nimport ViewList from \"./ViewList\";\nimport ViewForm from \"./ViewForm\";\n\nimport ProductContext from \"../context/ProductContext\";\nimport ModeContext from \"../context/ModeContext\";\nimport Toggle from \"./Toggle\";\n\nfunction Product() {\n  const ctx = useContext(ProductContext);\n  const modeCtx = useContext(ModeContext);\n  const [list, setList] = useState([]);\n  // const [sumTotal, setSumTotal] = useState(0);\n\n  /*\n    CREATE: Add a new product into the list\n  */\n  const handlerAddProduct = () => {\n    const newItem = {\n      id: uuid(),\n      // id: null,\n      name: ctx.name,\n      quantity: ctx.count,\n      price: ctx.price,\n      discount: ctx.discount,\n      total: (ctx.count * ctx.price * (100 - ctx.discount)) / 100,\n    };\n    const newList = [...list, newItem];\n    setList(newList);\n    // const sum = sumTotal + newItem.total;\n    // setSumTotal(sum);\n  };\n\n  /*\n    DELETE: Remove a  product from the list\n  */\n  const handlerDeleteProduct = (id) => {\n    setList((curList) => {\n      if (editMode) {\n        return curList;\n      } else {\n        // makes a copy of original arr\n        const updatedList = curList.filter((item) => item.id !== id);\n        return updatedList;\n      }\n    });\n  };\n  //\n\n  /*\n    UPDATE: Edit a  product in the list\n  */\n  const [editMode, setEditMode] = useState(false);\n  const [editItem, setEditItem] = useState({\n    index: 0,\n    name: \"\",\n    quantity: 0,\n    price: 0,\n    discount: 0,\n  });\n\n  const handlerUpdateProduct = (editId) => {\n    const index = list.findIndex((item) => item.id === editId);\n    console.log(\"edit clicked\");\n    setEditMode(true);\n    setEditItem(() => {\n      const item = { ...list[index] };\n      item.index = index;\n      return item;\n    });\n    console.log(editItem);\n  };\n\n  //ref function below from answer in part 2 final assignment\n  const handlerUpdateForm = (event, key) => {\n    const value = event.target.value;\n    const updatedItem = {\n      ...editItem,\n      [key]: value,\n    };\n\n    setEditItem(updatedItem);\n  };\n\n  const handlerSubmitForm = (index) => {\n    setList((prevList) => {\n      const updatedList = [...prevList];\n      updatedList[index] = editItem;\n      updatedList[index].total =\n        updatedList[index].quantity *\n        updatedList[index].price *\n        (1 - updatedList[index].discount / 100);\n      return updatedList;\n    });\n    setEditMode(false);\n  };\n\n  //---------------------------------------------------------------------------\n\n  return (\n    <div className={`${styles.container} ${modeCtx.isDark && styles.dark}`}>\n      <Toggle />\n      <Card handlerAddProduct={handlerAddProduct} />\n      <ViewList\n        list={list}\n        // sum={totalAmt}\n        handlerDeleteItem={handlerDeleteProduct}\n        handlerEditItem={handlerUpdateProduct}\n      />\n      {editMode && (\n        <ViewForm\n          item={editItem}\n          handlerUpdateForm={handlerUpdateForm}\n          handlerSubmitForm={handlerSubmitForm}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Product;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}